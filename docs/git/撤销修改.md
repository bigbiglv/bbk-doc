# 撤销修改
没有 `push` 到远程库之前的撤销操作

## 暂存区到工作区
- 全部移动
  - `git restore --staged .`
  - `git reset HEAD`
- 按文件
  - `git restore --staged [file]`
  - `git reset HEAD [file]`

## 丢弃工作区修改
- 全部丢弃
  - `git restore .`
  - `git checkout -- .`
- 按文件
  - `git restore [file]`
  - `git checkout -- [file]`
- 清理未追踪的文件和目录
  - `git clean -fd`

:::danger 从工作区丢弃修改后无法恢复
:::

## 撤销历史指定commit上的某个文件的提交 (未push)
```
# 指定commit hash bf90263
git rebase -i [bf90263的上个commit]
# 打开了Vim编辑器

# 删除整个commit
光标移动到改行按 d

# 编辑指定commit
# 光标移动到bf90263的pick上
# 按 cw 将 pick 改为 edit 保存关闭 :wq

# 修改文件 
vim src/views/xxx/index.vue 修改后提交
git add src/views/xxx/index.vue
git commit --amend
git rebase --continue

# 撤销文件提交
# 恢复目标文件到上一次版本
git checkout HEAD^ -- src/views/xxx/index.vue
# 从暂存区移除他
git restore --staged src/views/xxx/index.vue
git commit --amend
git rebase --continue

# 此时指定的文件已经恢复到改动前了 改动内容被丢弃
# 从bf90263开始的hash都改变 但是commit的时间不变
```

